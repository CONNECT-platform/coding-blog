<!DOCTYPE html><html><head><title>coding.blog | How Coding Blog JAMStack Works</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><meta name="subject" content="A Blog for Everything Coding"><meta name="robots" content="index,follow"><meta name="description" content="Why we chose JAMStack for coding.blog, instead of doing SSR, making an Singe-Page Application,
setting up an isomorphic Javascript project, etc.
Also details on how we implemented it using SDH rendering, and how it gave us incredible performance,
flexibility and developer experience."><meta name="keywords" content="blog, article, software, programming, code, open-source, open source, coding, tech, IT, blogging, tutorials, articles, convenient, beautiful, modern, Javascript, Frontend, React, JSX, Typescript, GatsbyJS, JAMStack, Isomorphic, SSR, "><meta name="theme-color" content="#212121"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><link rel="shortcut icon" href="/favicon.ico"><link href="https://fonts.googleapis.com/css?family=Hind:400,700&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:300,400&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/icon?family=Material+Icons%7CMaterial+Icons+Outlined&amp;display=swap" rel="stylesheet"><style>
      body, input, button {
        font-family: 'Hind', sans-serif;
      }

      code, .hljs {
        font-family: 'Source Code Pro', 'Courier New', Courier, monospace;
      }

      .icon-font {
        font-family: 'Material Icons';
        font-weight: normal;
        font-style: normal;
        font-size: 24px;  /* Preferred icon size */
        display: inline-block;
        line-height: 1;
        text-transform: none;
        letter-spacing: normal;
        word-wrap: normal;
        white-space: nowrap;
        direction: ltr;
      
        /* Support for all WebKit browsers. */
        -webkit-font-smoothing: antialiased;
        /* Support for Safari and Chrome. */
        text-rendering: optimizeLegibility;
      
        /* Support for Firefox. */
        -moz-osx-font-smoothing: grayscale;
      
        /* Support for IE. */
        font-feature-settings: 'liga';
      }

      .icon-font.outline {
        font-family: 'Material Icons Outlined';
      }
    </style><script>
          window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
          ga('create', 'UA-UA-177467962-1-Y', 'auto');
          ga('send', 'pageview');
          </script><script async="" src="https://www.google-analytics.com/analytics.js"></script><link href="/docs/assets/codedoc-styles.css" rel="stylesheet"><script async="" defer="" src="/docs/assets/codedoc-bundle.js"></script><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="How Coding Blog JAMStack Works"><meta name="twitter:creator" content="@lorean_victor"><meta name="twitter:site" content="@coding_blog"><meta name="twitter:description" content="Why we chose JAMStack for coding.blog, instead of doing SSR, making an Singe-Page Application,
setting up an isomorphic Javascript project, etc.
Also details on how we implemented it using SDH rendering, and how it gave us incredible performance,
flexibility and developer experience."><meta name="twitter:image" content="https://coding.blog/img/blogs/performance-comparison-v-gatsbyjs.png"><meta property="og:type" content="article"><meta property="og:title" content="How Coding Blog JAMStack Works"><meta property="og:description" content="Why we chose JAMStack for coding.blog, instead of doing SSR, making an Singe-Page Application,
setting up an isomorphic Javascript project, etc.
Also details on how we implemented it using SDH rendering, and how it gave us incredible performance,
flexibility and developer experience."><meta property="og:image" content="https://coding.blog/img/blogs/performance-comparison-v-gatsbyjs.png"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous"></head><body><div class="header-0-0-5"><a class="watermark-0-0-4" href="https://github.com/CONNECT-platform/codedoc" target="_blank">Created With<svg viewBox="0 0 536 296" version="1.1" xmlns="http://www.w3.org/2000/svg"><g id="codedoc" transform="translate(-244.000000, -364.000000)" fill-rule="nonzero"><path d="M580,532 C615.346224,532 644,560.653776 644,596 C644,631.346224 615.346224,660 580,660 C544.653776,660 516,631.346224 516,596 C516,560.653776 544.653776,532 580,532 Z M716,532 C751.346224,532 780,560.653776 780,596 C780,631.346224 751.346224,660 716,660 L692,660 C687.581722,660 684,656.418278 684,652 C684,647.581722 687.581722,644 692,644 L716,644 C742.509668,644 764,622.509668 764,596 C764,569.490332 742.509668,548 716,548 L692,548 C687.581722,548 684,544.418278 684,540 C684,535.581722 687.581722,532 692,532 L716,532 Z M468,532 C472.418278,532 476,535.581722 476,540 L476,652 C476,656.418278 472.418278,660 468,660 L444,660 C408.653776,660 380,631.346224 380,596 C380,560.653776 408.653776,532 444,532 L468,532 Z M332,532 C336.418278,532 340,535.581722 340,540 L340,652 C340,656.418278 336.418278,660 332,660 L252,660 C247.581722,660 244,656.418278 244,652 L244,540 C244,535.581722 247.581722,532 252,532 L332,532 Z M580,548 C553.490332,548 532,569.490332 532,596 C532,622.509668 553.490332,644 580,644 C606.509668,644 628,622.509668 628,596 C628,569.490332 606.509668,548 580,548 Z M461,548 L444,548 C417.490332,548 396,569.490332 396,596 C396,622.509668 417.490332,644 444,644 L461,644 L461,548 Z M444,364 C479.346224,364 508,392.653776 508,428 C508,463.346224 479.346224,492 444,492 C408.653776,492 380,463.346224 380,428 C380,392.653776 408.653776,364 444,364 Z M332,364 C336.418278,364 340,367.581722 340,372 C340,376.418278 336.418278,380 332,380 L308,380 C281.490332,380 260,401.490332 260,428 C260,454.509668 281.490332,476 308,476 L332,476 C336.418278,476 340,479.581722 340,484 C340,488.418278 336.418278,492 332,492 L308,492 C272.653776,492 244,463.346224 244,428 C244,392.653776 272.653776,364 308,364 L332,364 Z M580,364 C615.346224,364 644,392.653776 644,428 C644,463.346224 615.346224,492 580,492 L556,492 C551.581722,492 548,488.418278 548,484 L548,372 C548,367.581722 551.581722,364 556,364 L580,364 Z M772,364 C776.418278,364 780,367.581722 780,372 C780,376.418278 776.418278,380 772,380 L700,380 L700,420 L772,420 C776.418278,420 780,423.581722 780,428 C780,432.418278 776.418278,436 772,436 L700,436 L700,476 L772,476 C776.418278,476 780,479.581722 780,484 C780,488.418278 776.418278,492 772,492 L692,492 C687.581722,492 684,488.418278 684,484 L684,372 C684,367.581722 687.581722,364 692,364 L772,364 Z M444,380 C417.490332,380 396,401.490332 396,428 C396,454.509668 417.490332,476 444,476 C470.509668,476 492,454.509668 492,428 C492,401.490332 470.509668,380 444,380 Z M580,380 L563,380 L563,476 L580,476 C606.509668,476 628,454.509668 628,428 C628,401.490332 606.509668,380 580,380 Z"></path></g></svg></a></div><div id="-codedoc-container" class="container"><div class="darklight-0-0-1"><div class="dark"><p><img src="/img/under-the-hood-dark.svg" alt="Banner"></p></div><div class="light"><p><img src="/img/under-the-hood.svg" alt="Banner"></p></div></div><h1 id="how-coding-blog-jamstack-works" class="heading-0-0-12"><span class="anchor-0-0-13" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>How Coding Blog JAMStack Works</h1><p>Basics of providing content over the internet are fairly straight-forward: Browsers will send requests to your
server, and your server responds with some HTML potentially linked to some JS and CSS.</p><marker><br>

</marker><p>How and when you generate those HTML, CSS and JS content is however an entirely different thing. You might want
to prepare them all in advance and have your server just serve them (pre-rendering), 
you might have your server generate them on the fly (SSR), 
or you might have your server ship some code to the browser that will then generate them (client-side rendering, SPAs). 
You might even generate requested content on the server and ship it with the code that 
would generate subsequently requested content on the browser (isomorphic).</p><marker><br>

</marker><p>There is one particular approach pretty suitable for blogs: you prepare most of the content before hand, then
serve it alongside code that would wire-in interactive bits and generate fully dynamic components. This is called
the <a href="https://jamstack.org">JAMStack</a>, and it is the approach used by <a href="https://coding.blog"><code>coding.blog</code></a> and
<a href="https://codedoc.cc"><strong>CODEDOC</strong></a> for content generation. In this post, we go through the reasons we chose this
approach, and how we implemented it.</p><hr><h1 id="why-jamstack" class="heading-0-0-12"><span class="anchor-0-0-13" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Why JAMStack?</h1><p>To better understand why we chose <em>JAMStack</em> for <code>coding.blog</code> and how we set our further design goals, its good
to first have a general overview of methods of web content generation/delivery:</p><marker><br>

</marker><div class="big-0-0-21"><p>Pre-Rendering</p></div><p>Pre-rendering simply means preparing your content before-hand, i.e. in the <em>build stage</em>. This is the fastest
delivery method, and allows you to simply use a CDN instead of writing a server for serving your content.</p><div class="darklight-0-0-1"><div class="dark"><p><img src="/img/blogs/pre-rendering-dark.svg" alt="Pre-Rendering"></p></div><div class="light"><p><img src="/img/blogs/pre-rendering.svg" alt="Pre-Rendering"></p></div></div><div class="big-0-0-21"><p>Server Side Rendering (SSR)</p></div><p>Instead of preparing the content, you can generate them on-the fly on your server, in response to each request.
This is perhaps useful when your content needs to change based on incoming requests, and perhaps you need to
get some data from some API to be able to create the content. However, this approach is obviously much slower
than pre-rendering.</p><div class="darklight-0-0-1"><div class="dark"><p><img src="/img/blogs/ssr-dark.svg" alt="SSR"></p></div><div class="light"><p><img src="/img/blogs/ssr.svg" alt="SSR"></p></div></div><div class="big-0-0-21"><p>Client-Side Rendering and SPAs</p></div><p>Highly interactive and dynamic content means you need to generate content on the client-side. To avoid having
content-generation code in multiple places (which is hard to maintain / scale), you could instead conduct all
content generation on the client browser, having your server just ship the content generation code.</p><p>To avoid shipping the content generation code for each page of your site, you can also take control of the 
navigation on the client side, which leads to a <em>Single Page Application</em> (SPA for short). This is the basis
of all modern front-end frameworks.</p><div class="darklight-0-0-1"><div class="dark"><p><img src="/img/blogs/csr-dark.svg" alt="CSR &amp; SPA"></p></div><div class="light"><p><img src="/img/blogs/csr.svg" alt="CSR &amp; SPA"></p></div></div><p>Client-side rendering means the user should wait extra time for being able to see the content, since typically
servers are faster at generating content. It also messes up with SEO, since crawlers might not be able to even
get the content in its full form (since they are not browsers) and so might not be able to properly index it.</p><marker><br>

</marker><div class="big-0-0-21"><p>Isomorphic Apps</p></div><p>To overcome these issues without spreading the content generation code in multiple places, the concept of <em>isomorphic apps</em>
was introduced. The idea is to basically run the same code both on the server and on the client, while also shipping
the code itself to the client alongside content rendered on the server.</p><div class="darklight-0-0-1"><div class="dark"><p><img src="/img/blogs/isomorphic-dark.svg" alt="Isomorphic Apps"></p></div><div class="light"><p><img src="/img/blogs/isomorphic.svg" alt="Isomorphic Apps"></p></div></div><p>The complexity of isomorphic apps inevitably brings extra constraints and overheads. For example, you need to re-hydrate
the content on client-side, which means you are limited on how you manipulate that content (e.g. for React SSR, React needs
to maintain full control of the DOM tree). These complexities also make it harder to optimize performance since many more
components and their interactions are affecting it.</p><marker><br>

</marker><div class="big-0-0-21"><p>JAMStack Apps</p></div><p>Another approach would be to pre-render all your static content and then ship the code for filling in dynamic/interactive
parts to the client. This would allow for the same delivery speed of pre-rendering without sacrificing interactivity
of the content. It also implies a clear separation in the code-base as opposed to isomorphic apps: there is code that
pre-renders stuff, and there is code that goes to client and makes stuff interactive.</p><div class="darklight-0-0-1"><div class="dark"><p><img src="/img/blogs/jamstack-dark.svg" alt="JAMStack"></p></div><div class="light"><p><img src="/img/blogs/jamstack.svg" alt="JAMStack"></p></div></div><p>The JAMStack architecture is specifically suitable for mostly static content, which makes it a perfect choice
for likes of <strong>CODEDOC</strong> (which is for documentation / guides about codes) and <code>coding.blog</code> (which is for blogs about
coding / programming). The simplicity of the workflow allows for easy optimization and high degrees of interoperability
and extensibility.</p><hr><h1 id="design-goals" class="heading-0-0-12"><span class="anchor-0-0-13" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Design Goals</h1><p>While the JAMStack architecture was the most suitable for <a href="https://codedoc.cc"><strong>CODEDOC</strong></a> and <a href="https://coding.blog"><code>coding.blog</code></a>,
it mandates a split of content generation code into bits that are executed at build stage and bits that are
shipped to the client. This can quickly add a lot of complexity/overhead for any growing project, so we had to
find a solution that addressed this particular issue.</p><p>In other words, we needed to:</p><ul><li>have a shared component system</li><li>easily mark client-side components so that they are not pre-rendered</li><li>seamlessly where these components were to be rendered in the DOM tree</li><li>conveniently and efficiently collect and bundle the code of these clients</li><li>conveniently attach these bundles to pre-rendered content</li></ul><marker><br>

</marker><p>Additionally, we wanted a minimal toolchain and stack with maximum extensibility and interoperability. Generally
we wanted knowledge of HTML/JS/CSS to suffice for serious customization, which made a <a href="https://reactjs.org/docs/introducing-jsx.html">JSX</a>-based 
syntax an optimal choice for our component system (specifically as Typescript supports it out of the box).</p><p>However, we couldn't use a library like React (or any VirtualDOM based solution) since its sensitivity to external changes to 
the DOM tree meant limitations on how the DOM is manipulated by extensions, either during pre-rendering or on the client.
Besides, we needed our content to be as light-weight as possible, which simply prohibited relatively heavy-weight
operations such as VirtualDOM diffing.</p><hr><h1 id="basic-rendering" class="heading-0-0-12"><span class="anchor-0-0-13" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Basic Rendering</h1><p>To satisfy our design goals, we created a JSX-based rendering tool which directly sits on top of DOM APIs.
This is called <a href="https://github.com/CONNECT-platform/connective-html">CONNECTIVE HTML</a>, and on a basic level
is merely a wrapper of DOM APIs that allows using them via JSX:</p><pre class="with-bar"><code class="tsx -codedoc-code-snippet code-0-0-27" tabindex="0"><span class="wmbar-0-0-30"><span></span><span></span><span></span><span></span></span><div class="line-0-0-29  -codedoc-code-line" data-content="import { Renderer } from '@connectv/html';" id="code1-l1"><span class="lineCounter-0-0-28 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">import</span> <span class="token punctuation">{</span> Renderer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@connectv/html'</span><span class="token punctuation">;</span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="" id="code1-l2"><span class="lineCounter-0-0-28 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="const renderer = new Renderer();" id="code1-l3"><span class="lineCounter-0-0-28 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">const</span> renderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Renderer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="renderer.render(<div>Hellow World!</div>).on(document.body);" id="code1-l4"><span class="lineCounter-0-0-28 prim -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hellow World!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br></code></pre><div style="text-align: right"><a class="button-0-0-2" href="https://stackblitz.com/edit/connective-html-hellowworld?file=index.tsx" target="_blank">Try It!</a></div><p>For more dynamic/reactive content, we simply added plugins to allow rendering 
<a href="https://rxjs-dev.firebaseapp.com/guide/observable">RxJS Observables</a>:</p><pre class="with-bar"><code class="tsx -codedoc-code-snippet code-0-0-27" tabindex="0"><span class="wmbar-0-0-30"><span></span><span></span><span></span><span></span></span><div class="line-0-0-29  -codedoc-code-line" data-content="import { Renderer } from '@connectv/html';" id="code2-l1"><span class="lineCounter-0-0-28 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">import</span> <span class="token punctuation">{</span> Renderer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@connectv/html'</span><span class="token punctuation">;</span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="import { timer } from 'rxjs';" id="code2-l2"><span class="lineCounter-0-0-28 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">import</span> <span class="token punctuation">{</span> timer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs'</span><span class="token punctuation">;</span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="" id="code2-l3"><span class="lineCounter-0-0-28 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="const renderer = new Renderer();" id="code2-l4"><span class="lineCounter-0-0-28 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">const</span> renderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Renderer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="renderer.render(<div>You have been here for {timer(0, 1000)} second(s).</div>)" id="code2-l5"><span class="lineCounter-0-0-28 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">You have been here for </span><span class="token punctuation">{</span><span class="token function">timer</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text"> second(s).</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="        .on(document.body);" id="code2-l6"><span class="lineCounter-0-0-28 prim -codedoc-line-counter">6<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>        <span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span></div><br></code></pre><div style="text-align: right"><a class="button-0-0-2" href="https://stackblitz.com/edit/connective-html-timer?file=index.tsx" target="_blank">Try It!</a></div><p>This of course meant that for interactive components familiarity with <a href="https://www.learnrxjs.io/">RxJS</a> was required, 
however, you generally do require familiarity with some reactive state management library to be able to 
properly create interactive components. RxJS might not be the easiest such library for people to dive in, but
considering its widespread usage and the overall performance gain, we felt this was a compromise well worth it.</p><blockquote><p>Fun fact: Historically CONNECTIVE HTML was developed first and CODEDOC as a tool to document it. However
as a result of popularity of CODEDOC and subsequently <code>coding.blog</code>, I haven't found the time to use it 
for its original purpose yet.</p></blockquote><hr><h1 id="sdh-rendering" class="heading-0-0-12"><span class="anchor-0-0-13" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>SDH Rendering</h1><p>To meet the remainder of our design goals, we created a tool named <a href="https://github.com/CONNECT-platform/connective-sdh">CONNECTIVE SDH</a>. 
SDH stands for <em>Static/Dynamic HTML</em>, which means this library allowed us to seamlessly create both static (pre-rendered) 
and dynamic (rendered on client-side) HTML content.</p><p>This is how CONNECTIVE SDH works:</p><marker><br>

</marker><h2 id="static-content" class="heading-0-0-12"><span class="anchor-0-0-13" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Static Content</h2><p>For pre-rendering (or even SSR), the fact that CONNECTIVE HTML is pretty thin meant that we could simply combine it
with <a href="https://github.com/jsdom/jsdom">JSDOM</a> and add some nice functions for storing the results:</p><pre class="with-bar"><code class="tsx -codedoc-code-snippet code-0-0-27" tabindex="0"><span class="wmbar-0-0-30"><span></span><span></span><span></span><span></span></span><div class="line-0-0-29  -codedoc-code-line" data-content="import { compile } from '@connectv/sdh';" id="code3-l1"><span class="lineCounter-0-0-28 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">import</span> <span class="token punctuation">{</span> compile <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@connectv/sdh'</span><span class="token punctuation">;</span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="" id="code3-l2"><span class="lineCounter-0-0-28 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="compile(renderer => " id="code3-l3"><span class="lineCounter-0-0-28 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token parameter">renderer</span> <span class="token operator">=&gt;</span> </div><br><div class="line-0-0-29  -codedoc-code-line" data-content="  <html>" id="code3-l4"><span class="lineCounter-0-0-28 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="    <head>" id="code3-l5"><span class="lineCounter-0-0-28 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="      <title>Hellow World Example</title>" id="code3-l6"><span class="lineCounter-0-0-28 -codedoc-line-counter">6<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hellow World Example</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="    </head>" id="code3-l7"><span class="lineCounter-0-0-28 -codedoc-line-counter">7<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="    <body>" id="code3-l8"><span class="lineCounter-0-0-28 -codedoc-line-counter">8<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="      <h1>Hellow World!</h1>" id="code3-l9"><span class="lineCounter-0-0-28 -codedoc-line-counter">9<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hellow World!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="    </body>" id="code3-l10"><span class="lineCounter-0-0-28 prim -codedoc-line-counter">10<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="  </html>" id="code3-l11"><span class="lineCounter-0-0-28 -codedoc-line-counter">11<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content=").save('dist/index.html');" id="code3-l12"><span class="lineCounter-0-0-28 prim -codedoc-line-counter">12<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token string">'dist/index.html'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br></code></pre><div style="text-align: right"><a class="button-0-0-2" href="https://codesandbox.io/s/connective-sdh-hellow-world-deom3" target="_blank">Try It!</a></div><marker><br>

</marker><p>Or for a more <em>component oriented</em> example:</p><div class="tabs-0-0-31"><script id="pGpbHtqi_A">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("pGpbHtqi_A", "35QFbN70LTVyd/ipvfqjCQ==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script><div class="tab first selected" data-tab-title="Main Code" data-tab-id="Main Code"><pre class="with-bar"><code class="tsx -codedoc-code-snippet code-0-0-27" tabindex="0"><span class="wmbar-0-0-30"><span></span><span></span><span></span><span>main.tsx</span></span><div class="line-0-0-29  -codedoc-code-line" data-content="import { compile } from '@connectv/sdh';" id="code4-l1"><span class="lineCounter-0-0-28 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">import</span> <span class="token punctuation">{</span> compile <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@connectv/sdh'</span><span class="token punctuation">;</span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="import { Card } from './card'; // @see [Component Code](tab:comp)" id="code4-l2"><span class="lineCounter-0-0-28 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">import</span> <span class="token punctuation">{</span> Card <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./card'</span><span class="token punctuation">;</span> <span class="token comment">// @see [Component Code](tab:comp)</span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="" id="code4-l3"><span class="lineCounter-0-0-28 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="compile(renderer => " id="code4-l4"><span class="lineCounter-0-0-28 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token parameter">renderer</span> <span class="token operator">=&gt;</span> </div><br><div class="line-0-0-29  -codedoc-code-line" data-content="  <fragment>" id="code4-l5"><span class="lineCounter-0-0-28 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fragment</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="    <h1>List of stuff</h1>" id="code4-l6"><span class="lineCounter-0-0-28 -codedoc-line-counter">6<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">List of stuff</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="    <Card title='🥕Carrots' text='they are pretty good for you.'/>" id="code4-l7"><span class="lineCounter-0-0-28 -codedoc-line-counter">7<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Card</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>🥕Carrots<span class="token punctuation">'</span></span> <span class="token attr-name">text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>they are pretty good for you.<span class="token punctuation">'</span></span><span class="token punctuation">/&gt;</span></span><span class="token plain-text"></span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="  </fragment>" id="code4-l8"><span class="lineCounter-0-0-28 -codedoc-line-counter">8<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fragment</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content=").save('dist/index.html');" id="code4-l9"><span class="lineCounter-0-0-28 prim -codedoc-line-counter">9<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token string">'dist/index.html'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br></code></pre></div><div class="tab" data-tab-title="Component Code" data-tab-id="comp"><pre class="with-bar"><code class="tsx -codedoc-code-snippet code-0-0-27" tabindex="0"><span class="wmbar-0-0-30"><span></span><span></span><span></span><span>card.tsx</span></span><div class="line-0-0-29  -codedoc-code-line" data-content="const style = `" id="code5-l1"><span class="lineCounter-0-0-28 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">const</span> style <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"></span></span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="  display: inline-block;" id="code5-l2"><span class="lineCounter-0-0-28 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  display: inline-block;</div><br><div class="line-0-0-29  -codedoc-code-line" data-content="  vertical-align: top;" id="code5-l3"><span class="lineCounter-0-0-28 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  vertical-align: top;</div><br><div class="line-0-0-29  -codedoc-code-line" data-content="  padding: 8px;" id="code5-l4"><span class="lineCounter-0-0-28 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  padding: 8px;</div><br><div class="line-0-0-29  -codedoc-code-line" data-content="  border-radius: 8px;" id="code5-l5"><span class="lineCounter-0-0-28 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  border-radius: 8px;</div><br><div class="line-0-0-29  -codedoc-code-line" data-content="  margin: 8px;" id="code5-l6"><span class="lineCounter-0-0-28 -codedoc-line-counter">6<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  margin: 8px;</div><br><div class="line-0-0-29  -codedoc-code-line" data-content="  box-shadow: 0 2px 6px rgba(0, 0, 0, .2);" id="code5-l7"><span class="lineCounter-0-0-28 -codedoc-line-counter">7<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  box-shadow: 0 2px 6px rgba(0, 0, 0, .2);</div><br><div class="line-0-0-29  -codedoc-code-line" data-content="`;" id="code5-l8"><span class="lineCounter-0-0-28 -codedoc-line-counter">8<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token template-punctuation string">`</span><span class="token punctuation">;</span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="" id="code5-l9"><span class="lineCounter-0-0-28 -codedoc-line-counter">9<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="export function Card({ title, text }, renderer) {" id="code5-l10"><span class="lineCounter-0-0-28 prim -codedoc-line-counter">10<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">Card</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> title<span class="token punctuation">,</span> text <span class="token punctuation">}</span><span class="token punctuation">,</span> renderer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="  return <div style={style}>" id="code5-l11"><span class="lineCounter-0-0-28 -codedoc-line-counter">11<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>style<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="      <h2>{title}</h2>" id="code5-l12"><span class="lineCounter-0-0-28 -codedoc-line-counter">12<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="      <p>{text}</p>" id="code5-l13"><span class="lineCounter-0-0-28 -codedoc-line-counter">13<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>text<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="    </div>" id="code5-l14"><span class="lineCounter-0-0-28 -codedoc-line-counter">14<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="}" id="code5-l15"><span class="lineCounter-0-0-28 prim -codedoc-line-counter">15<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br></code></pre></div></div><div style="text-align: right"><a class="button-0-0-2" href="https://codesandbox.io/s/connective-sdh-static-components-r3b8i" target="_blank">Try It!</a></div><marker><br>

</marker><h2 id="dynamic-content" class="heading-0-0-12"><span class="anchor-0-0-13" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Dynamic Content</h2><p>For dynamic components, i.e. components that are to be rendered on the client side, we needed to:</p><ul><li>Collect and bundle their code</li><li>Attach that bundle to pre-rendered content</li><li>Create placeholders to maintain their position in the DOM tree</li></ul><p>With CONNECTIVE SDH, this process looks like this:</p><div class="tabs-0-0-31"><script id="DquIwslbWb">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("DquIwslbWb", "35QFbN70LTVyd/ipvfqjCQ==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script><div class="tab first selected" data-tab-title="Main Code" data-tab-id="Main Code"><pre class="with-bar"><code class="tsx -codedoc-code-snippet code-0-0-27" tabindex="0"><span class="wmbar-0-0-30"><span></span><span></span><span></span><span>main.tsx</span></span><div class="line-0-0-29  -codedoc-code-line" data-content="import { compile, save, Bundle } from '@connectv/sdh';" id="code6-l1"><span class="lineCounter-0-0-28 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">import</span> <span class="token punctuation">{</span> compile<span class="token punctuation">,</span> save<span class="token punctuation">,</span> Bundle <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@connectv/sdh'</span><span class="token punctuation">;</span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="import { $Counter } from './counter'; // @see [Component Code](tab:comp)" id="code6-l2"><span class="lineCounter-0-0-28 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">import</span> <span class="token punctuation">{</span> $Counter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./counter'</span><span class="token punctuation">;</span> <span class="token comment">// @see [Component Code](tab:comp)</span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="" id="code6-l3"><span class="lineCounter-0-0-28 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="const bundle = new Bundle('./bundle.js', 'dist/bundle.js');" id="code6-l4"><span class="lineCounter-0-0-28 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">const</span> bundle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bundle</span><span class="token punctuation">(</span><span class="token string">'./bundle.js'</span><span class="token punctuation">,</span> <span class="token string">'dist/bundle.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="" id="code6-l5"><span class="lineCounter-0-0-28 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="compile(renderer =>" id="code6-l6"><span class="lineCounter-0-0-28 -codedoc-line-counter">6<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token parameter">renderer</span> <span class="token operator">=&gt;</span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="  <fragment>" id="code6-l7"><span class="lineCounter-0-0-28 -codedoc-line-counter">7<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fragment</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="    <p>" id="code6-l8"><span class="lineCounter-0-0-28 -codedoc-line-counter">8<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="      So this content will be prerendered, but the following component will be" id="code6-l9"><span class="lineCounter-0-0-28 -codedoc-line-counter">9<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      So this content will be prerendered, but the following component will be</div><br><div class="line-0-0-29  -codedoc-code-line" data-content="      rendered on the client side." id="code6-l10"><span class="lineCounter-0-0-28 prim -codedoc-line-counter">10<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      rendered on the client side.</div><br><div class="line-0-0-29  -codedoc-code-line" data-content="    </p>" id="code6-l11"><span class="lineCounter-0-0-28 -codedoc-line-counter">11<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span></div><br><div class="line-0-0-29 highlight -codedoc-code-line" data-content="     <$Counter/>" id="code6-l12"><span class="lineCounter-0-0-28 -codedoc-line-counter">12<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>     &lt;$Counter/&gt;</div><br><div class="line-0-0-29  -codedoc-code-line" data-content="  </fragment>" id="code6-l13"><span class="lineCounter-0-0-28 -codedoc-line-counter">13<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fragment</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content=")" id="code6-l14"><span class="lineCounter-0-0-28 -codedoc-line-counter">14<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">)</span></div><br><div class="line-0-0-29 highlight -codedoc-code-line" data-content=" .post(bundle.collect())                    // --> collect all necessary dependencies in the bundle" id="code6-l15"><span class="lineCounter-0-0-28 prim -codedoc-line-counter">15<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>bundle<span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                    <span class="token comment">// --&gt; collect all necessary dependencies in the bundle</span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content=".save('dist/index.html')" id="code6-l16"><span class="lineCounter-0-0-28 -codedoc-line-counter">16<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token string">'dist/index.html'</span><span class="token punctuation">)</span></div><br><div class="line-0-0-29 highlight -codedoc-code-line" data-content=" .then(() => save(bundle))                  // --> build the bundle and store it on fs" id="code6-l17"><span class="lineCounter-0-0-28 prim -codedoc-line-counter">17<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">save</span><span class="token punctuation">(</span>bundle<span class="token punctuation">)</span><span class="token punctuation">)</span>                  <span class="token comment">// --&gt; build the bundle and store it on fs</span></div><br></code></pre></div><div class="tab" data-tab-title="Component Code" data-tab-id="comp"><pre class="with-bar"><code class="tsx -codedoc-code-snippet code-0-0-27" tabindex="0"><span class="wmbar-0-0-30"><span></span><span></span><span></span><span>counter.tsx</span></span><div class="line-0-0-29  -codedoc-code-line" data-content="import { state } from &quot;@connectv/core&quot;;" id="code7-l1"><span class="lineCounter-0-0-28 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">import</span> <span class="token punctuation">{</span> state <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@connectv/core"</span><span class="token punctuation">;</span></div><br><div class="line-0-0-29 highlight -codedoc-code-line" data-content=" import { transport } from &quot;@connectv/sdh/transport&quot;;" id="code7-l2"><span class="lineCounter-0-0-28 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> <span class="token keyword">import</span> <span class="token punctuation">{</span> transport <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@connectv/sdh/transport"</span><span class="token punctuation">;</span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="" id="code7-l3"><span class="lineCounter-0-0-28 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="const style = `" id="code7-l4"><span class="lineCounter-0-0-28 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">const</span> style <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"></span></span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="  border-radius: 3px;" id="code7-l5"><span class="lineCounter-0-0-28 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  border-radius: 3px;</div><br><div class="line-0-0-29  -codedoc-code-line" data-content="  background: #424242;" id="code7-l6"><span class="lineCounter-0-0-28 -codedoc-line-counter">6<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  background: #424242;</div><br><div class="line-0-0-29  -codedoc-code-line" data-content="  cursor: pointer;" id="code7-l7"><span class="lineCounter-0-0-28 -codedoc-line-counter">7<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  cursor: pointer;</div><br><div class="line-0-0-29  -codedoc-code-line" data-content="  padding: 8px;" id="code7-l8"><span class="lineCounter-0-0-28 -codedoc-line-counter">8<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  padding: 8px;</div><br><div class="line-0-0-29  -codedoc-code-line" data-content="  color: white;" id="code7-l9"><span class="lineCounter-0-0-28 -codedoc-line-counter">9<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  color: white;</div><br><div class="line-0-0-29  -codedoc-code-line" data-content="  display: inline-block;" id="code7-l10"><span class="lineCounter-0-0-28 prim -codedoc-line-counter">10<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  display: inline-block;</div><br><div class="line-0-0-29  -codedoc-code-line" data-content="  box-shadow: 0 2px 6px rgba(0, 0, 0, .12);" id="code7-l11"><span class="lineCounter-0-0-28 -codedoc-line-counter">11<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  box-shadow: 0 2px 6px rgba(0, 0, 0, .12);</div><br><div class="line-0-0-29  -codedoc-code-line" data-content="`;" id="code7-l12"><span class="lineCounter-0-0-28 -codedoc-line-counter">12<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token template-punctuation string">`</span><span class="token punctuation">;</span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="" id="code7-l13"><span class="lineCounter-0-0-28 -codedoc-line-counter">13<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="export function Counter(_, renderer) {" id="code7-l14"><span class="lineCounter-0-0-28 -codedoc-line-counter">14<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">Counter</span><span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> renderer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="  const count = state(0);" id="code7-l15"><span class="lineCounter-0-0-28 prim -codedoc-line-counter">15<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">state</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="  return (" id="code7-l16"><span class="lineCounter-0-0-28 -codedoc-line-counter">16<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token keyword">return</span> <span class="token punctuation">(</span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="    <div style={style} onclick={() => count.value++}>" id="code7-l17"><span class="lineCounter-0-0-28 -codedoc-line-counter">17<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>style<span class="token punctuation">}</span></span> <span class="token attr-name">onclick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> count<span class="token punctuation">.</span>value<span class="token operator">++</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="      You have clicked {count} times!" id="code7-l18"><span class="lineCounter-0-0-28 -codedoc-line-counter">18<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      You have clicked <span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token plain-text"> times!</span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="    </div>" id="code7-l19"><span class="lineCounter-0-0-28 -codedoc-line-counter">19<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="  );" id="code7-l20"><span class="lineCounter-0-0-28 prim -codedoc-line-counter">20<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="}" id="code7-l21"><span class="lineCounter-0-0-28 -codedoc-line-counter">21<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">}</span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="" id="code7-l22"><span class="lineCounter-0-0-28 -codedoc-line-counter">22<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span></div><br><div class="line-0-0-29 highlight -codedoc-code-line" data-content=" export const $Counter = transport(Counter); // --> transports `Counter` to client-side" id="code7-l23"><span class="lineCounter-0-0-28 prim -codedoc-line-counter">23<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span> <span class="token keyword">export</span> <span class="token keyword">const</span> $Counter <span class="token operator">=</span> <span class="token function">transport</span><span class="token punctuation">(</span>Counter<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// --&gt; transports `Counter` to client-side</span></div><br></code></pre></div></div><div style="text-align: right"><a class="button-0-0-2" href="https://codesandbox.io/s/connective-sdh-interactive-example-cgfwf" target="_blank">Try It!</a></div><marker><br>

</marker><h3 id="placeholders" class="heading-0-0-12"><span class="anchor-0-0-13" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Placeholders</h3><p>In this example, <code>Counter</code> is a component that needs to be rendered on the client-side, i.e. it needs
to be <em>transported</em> to the client. This is done via this line of the code:</p><pre class=""><code class="tsx -codedoc-code-snippet code-0-0-27" tabindex="0"><span class="wmbar-0-0-30"><span></span><span></span><span></span><span></span></span><div class="line-0-0-29  -codedoc-code-line" data-content="export const $Counter = transport(Counter); // --> transports `Counter` to client-side" id="code8-l1"><span class="lineCounter-0-0-28 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">export</span> <span class="token keyword">const</span> $Counter <span class="token operator">=</span> <span class="token function">transport</span><span class="token punctuation">(</span>Counter<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// --&gt; transports `Counter` to client-side</span></div><br></code></pre><p>The <code>transport()</code> function simply figures out the import path for <code>Counter</code>, and then creates a placeholder
component, i.e. <code>$Counter</code>, that also is marked with that information. If executed on the client-side,
it will return <code>Counter</code> itself, since there is no need to transport anything.</p><p>As a result, we now can use <code>$Counter</code> inside any context. If it is used during pre-rendering, then
it will be a placeholder that will be replaced with <code>Counter</code> on client-side, and if it is used on the client-side,
then it is identical to <code>Counter</code>:</p><pre class=""><code class="tsx -codedoc-code-snippet code-0-0-27" tabindex="0"><span class="wmbar-0-0-30"><span></span><span></span><span></span><span></span></span><div class="line-0-0-29  -codedoc-code-line" data-content="compile(renderer =>" id="code9-l1"><span class="lineCounter-0-0-28 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token parameter">renderer</span> <span class="token operator">=&gt;</span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="  <fragment>" id="code9-l2"><span class="lineCounter-0-0-28 -codedoc-line-counter">2<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fragment</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="    <p>" id="code9-l3"><span class="lineCounter-0-0-28 -codedoc-line-counter">3<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content="      So this content will be prerendered, but the following component will be" id="code9-l4"><span class="lineCounter-0-0-28 -codedoc-line-counter">4<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      So this content will be prerendered, but the following component will be</div><br><div class="line-0-0-29  -codedoc-code-line" data-content="      rendered on the client side." id="code9-l5"><span class="lineCounter-0-0-28 prim -codedoc-line-counter">5<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>      rendered on the client side.</div><br><div class="line-0-0-29  -codedoc-code-line" data-content="    </p>" id="code9-l6"><span class="lineCounter-0-0-28 -codedoc-line-counter">6<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span></div><br><div class="line-0-0-29 highlight -codedoc-code-line" data-content="     <$Counter/>" id="code9-l7"><span class="lineCounter-0-0-28 -codedoc-line-counter">7<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>     &lt;$Counter/&gt;</div><br><div class="line-0-0-29  -codedoc-code-line" data-content="  </fragment>" id="code9-l8"><span class="lineCounter-0-0-28 -codedoc-line-counter">8<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fragment</span><span class="token punctuation">&gt;</span></span></div><br><div class="line-0-0-29  -codedoc-code-line" data-content=")" id="code9-l9"><span class="lineCounter-0-0-28 prim -codedoc-line-counter">9<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">)</span></div><br></code></pre><marker><br>

</marker><h3 id="bundling" class="heading-0-0-12"><span class="anchor-0-0-13" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Bundling</h3><p>The <code>Bundle</code> class provided by SDH allows us to easily manage client-side bundles. We wanted to comply with a no-magic
approach for SDH, so we didn't want to hide bundle management inside some obscure serialization process:</p><pre class=""><code class="tsx -codedoc-code-snippet code-0-0-27" tabindex="0"><span class="wmbar-0-0-30"><span></span><span></span><span></span><span></span></span><div class="line-0-0-29  -codedoc-code-line" data-content="const bundle = new Bundle('./bundle.js', 'dist/bundle.js');" id="code10-l1"><span class="lineCounter-0-0-28 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">const</span> bundle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bundle</span><span class="token punctuation">(</span><span class="token string">'./bundle.js'</span><span class="token punctuation">,</span> <span class="token string">'dist/bundle.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br></code></pre><p>As mentioned earlier, we need to collect all client-side components and bundle their code. The <code>bundle</code> object
provides the <code>.collect()</code> method specifically for that purpose:</p><pre class=""><code class="tsx -codedoc-code-snippet code-0-0-27" tabindex="0"><span class="wmbar-0-0-30"><span></span><span></span><span></span><span></span></span><div class="line-0-0-29  -codedoc-code-line" data-content=".post(bundle.collect())" id="code11-l1"><span class="lineCounter-0-0-28 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>bundle<span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></div><br></code></pre><p>This will cause the bundle to scan the generated DOM tree and search for all <em>transport placeholders</em> (e.g. <code>$Counter</code>).
Since these placeholders are marked with the import path of their original component, the bundle object
can then collect all necessary import paths for creating a client-side bundle.</p><p>After collecting all client-side dependencies, we simply generate the bundle code:</p><pre class=""><code class="tsx -codedoc-code-snippet code-0-0-27" tabindex="0"><span class="wmbar-0-0-30"><span></span><span></span><span></span><span></span></span><div class="line-0-0-29  -codedoc-code-line" data-content=".then(() => save(bundle));" id="code12-l1"><span class="lineCounter-0-0-28 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">save</span><span class="token punctuation">(</span>bundle<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div><br></code></pre><p>SDH will first create an entry point for the client-side bundle, in which it imports all necessary components.
It also adds some necessary code that would allow transport placeholders to replace themselves with their actual components
when they reach the client.</p><p>Afterwards, SDH uses <a href="https://webpack.js.org/">Webpack</a> to create a bundle out of that entry file (the bundler and its configuration
naturally can be overriden as well). <a href="https://webpack.js.org/guides/tree-shaking/">Webpack's Tree-shaking</a>, 
coupled with the fact that only components used within a scanned DOM-tree,</p><marker><br>

</marker><h3 id="transport-mechanism" class="heading-0-0-12"><span class="anchor-0-0-13" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Transport Mechanism</h3><p>Lets take another look at the line responsible for creating the transport placeholder of <code>Counter</code>:</p><pre class=""><code class="tsx -codedoc-code-snippet code-0-0-27" tabindex="0"><span class="wmbar-0-0-30"><span></span><span></span><span></span><span></span></span><div class="line-0-0-29  -codedoc-code-line" data-content="export const $Counter = transport(Counter); // --> transports `Counter` to client-side" id="code13-l1"><span class="lineCounter-0-0-28 prim -codedoc-line-counter">1<span class="-codedoc-line-link"><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span></span><span class="token keyword">export</span> <span class="token keyword">const</span> $Counter <span class="token operator">=</span> <span class="token function">transport</span><span class="token punctuation">(</span>Counter<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// --&gt; transports `Counter` to client-side</span></div><br></code></pre><p>As discussed earlier, the transport placeholder, <code>$Counter</code>, needs to know its original component, i.e.
<code>Counter</code>, in order to replace itself on the client-side. This also means that it must know the exact import
path of <code>Counter</code>, so that it is able to communicate it to the bundle so that it can import it.</p><p>Since part of our goal with SDH was to avoid unnecessary complexities, we didn't want to make this
process super-complicated either. As a result, we added a simple rule: the <code>transport()</code> function MUST be called
in the file from which the original component is exported. This would allow the <code>transport()</code> function to take a look
at its own callstack and at the name of the component passed to it, and construct its import path.</p><hr><h1 id="pros" class="heading-0-0-12"><span class="anchor-0-0-13" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Pros</h1><p>First and fore-most, this approach results in great performance. Most of the content is pre-rendered, and
can be cached and efficiently delivered via CDNs, which means the browser gets its first response pretty
quickly and is immediately able to display content afterwards. Browsers of course do tend to wait for some
additional resources like scripts and stylesheets, however the scripts can also be deferred since they are
not necessary for using the initial content (and the styles are typically pretty slim).</p><blockquote><p>Obviosuly there is still room for improvement performance-wise, as for example right now fonts ARE throttling
the pages unnecessarily. I am still not sure about inlining the styles vs loading them independently,
since the former would yield faster page loads but the latter means more content is cacheable.</p></blockquote><p><img src="/img/blogs/performance-comparison-v-gatsbyjs.png" alt="Performance Comparison With GatsbyJS"></p><marker><center style="margin: 0 10vw; opacity: .5">
  <small>p.s. this is also not a standardized benchmark. it is just to convey a sense of performance in comparison
  with an industry leader like GatsbyJs</small>
</center>

</marker><marker><br>

</marker><p>Besides performance, the SDH rendering approach also makes it exceedingly convenient for maintaining pre-rendered
and client-side components alongside each other. You could easily turn any pre-rendered component into a client-side
one (and vice-versa), and the bundles would automatically adapt to those changes. To avoid mistakenly pre-rendering
client-side components, SDH also throws errors when it detects components trying to bind to browser events during
pre-rendering.</p><p>More importantly though, the thin-ness and simplicity of all tools used provides extreme interoperability,
both with DOM APIs and with external tools. <strong>CODEDOC</strong> and its plugins frequently use APIs like <code>document.querySelector()</code>
both during pre-rendering and on the client side to find and manually replace/modify DOM elements. Because there
is no Virtual DOM that needs to remain in sync with the actual DOM, there is no limit in how you can manipulate
generated content.</p><hr><h1 id="caveats" class="heading-0-0-12"><span class="anchor-0-0-13" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Caveats</h1><p>The SDH rendering approach is not without its own caveats as well. Here are the most important caveats we faced
while using SDH for <strong>CODEDOC</strong> and <code>coding.blog</code>:</p><marker><br>

</marker><h2 id="transport-safety" class="heading-0-0-12"><span class="anchor-0-0-13" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Transport Safety</h2><p>SDH makes it seamless to share code between pre-rendered components and client-side components. However, thats
not always a good thing to do, as a lot of packages and codes are not designed to be used on the client-side.</p><p>In really terrible cases, Webpack will fail to even create the bundle. A worse case situation is when it does
create the bundle, but is unable to tree-shake it properly, including huge chunks of unused code within the bundle.</p><marker><br>

</marker><h2 id="smooth-loading" class="heading-0-0-12"><span class="anchor-0-0-13" data-ignore-text=""><span class="icon-font" data-ignore-text="" style="vertical-align: sub">link</span></span>Smooth Loading</h2><p>Though <strong>CODEDOC</strong> (and <code>coding.blog</code>) pages are pretty light-weight with small and extremely cacheable shared resources,
still SPA-style loading offers a much better user experience. </p><p>To that end, we have even developed a specific smooth loading mechanism for <strong>CODEDOC</strong> and <code>coding.blog</code> that just fetches the requested 
HTML and replaces designated parts of the DOM. This strategy works pretty well, so well in-fact that I suspect it is possible to
simply extract it into a separate package that can offer SPA-style navigation for any JAMStack app.</p><p>However, our smooth loading strategy hinges on the fact that major resources (such as fonts, scripts and styles) are shared amongst
various content pages. SDH does support bundle splitting, as any <code>Bundle</code> instance tracks whether another <code>Bundle</code> instance has already
taken care of a particular client-side component or not. However utilizing this feature naively still leaves some shared code (mainly
that of RxJS and CONNECTIVE HTML) duplicated across multiple bundles. It is possible to split those dependencies into separate bundles
as well, but right now that requires manual configuration of Webpack (or any bundler that is used) and it has yet to be tested in practice.</p><hr><blockquote><p>P.S. If you do not know what <code>coding.blog</code> is, its an open-source blog platform that is designed to be a place
for quality programming articles instead of ads, paywalls, etc. That is not just a mantra: we want to design
a platform that systematically maintains high content quality through transparently priced curation services
and open-ness of the platform itself.</p><p>If you are interested, you can <a href="https://coding.blog">read more about it here</a>. If you are someone who writes programming
blogs and are looking for a fresh, convenient, extremely customizable open-source blog on a cool domain like <code>https://your.coding.blog</code>, then
<a href="https://coding.blog/creators">checkout this piece</a> and enlist in our prospective creators list if you choose to join us.</p></blockquote><marker><br>

</marker><div class="card-0-0-14"><div class="top-0-0-16"><img class="avatar-0-0-15" src="/img/team/eugene.jpg"><div class="toptext-0-0-17"><div class="title-0-0-18">Eugene Ghanizadeh</div><div class="subtitle-0-0-19">Published on 24 June 2020</div></div></div><div class="content-0-0-20"></div></div><p><br><br></p><div hidden="" data-ignore-text="" data-meta-override="description" data-meta-override-behavior="replace"><p>Why we chose JAMStack for coding.blog, instead of doing SSR, making an Singe-Page Application,
setting up an isomorphic Javascript project, etc.
Also details on how we implemented it using SDH rendering, and how it gave us incredible performance,
flexibility and developer experience.</p></div><div hidden="" data-ignore-text="" data-meta-override="keywords" data-meta-override-behavior="extend"><p>Javascript, Frontend, React, JSX, Typescript, GatsbyJS, JAMStack, Isomorphic, SSR, </p></div><div hidden="" data-ignore-text="" data-meta-override-property="og:type"><p>article</p></div><div hidden="" data-ignore-text="" data-meta-override="twitter:card" data-meta-override-behavior="replace"><p>summary_large_image</p></div><div hidden="" data-ignore-text="" data-meta-override="twitter:title" data-meta-override-behavior="replace"><p>How Coding Blog JAMStack Works</p></div><div hidden="" data-ignore-text="" data-meta-override-property="og:title"><p>How Coding Blog JAMStack Works</p></div><div hidden="" data-ignore-text="" data-meta-override="twitter:creator" data-meta-override-behavior="replace"><p>@lorean_victor</p></div><div hidden="" data-ignore-text="" data-meta-override="twitter:site" data-meta-override-behavior="replace"><p>@coding_blog</p></div><div hidden="" data-ignore-text="" data-meta-override="twitter:description" data-meta-override-behavior="replace"><p>Why we chose JAMStack for coding.blog, instead of doing SSR, making an Singe-Page Application,
setting up an isomorphic Javascript project, etc.
Also details on how we implemented it using SDH rendering, and how it gave us incredible performance,
flexibility and developer experience.</p></div><div hidden="" data-ignore-text="" data-meta-override-property="og:description"><p>Why we chose JAMStack for coding.blog, instead of doing SSR, making an Singe-Page Application,
setting up an isomorphic Javascript project, etc.
Also details on how we implemented it using SDH rendering, and how it gave us incredible performance,
flexibility and developer experience.</p></div><div hidden="" data-ignore-text="" data-meta-override="twitter:image" data-meta-override-behavior="replace"><p><a href="https://coding.blog/img/blogs/performance-comparison-v-gatsbyjs.png">https://coding.blog/img/blogs/performance-comparison-v-gatsbyjs.png</a></p></div><div hidden="" data-ignore-text="" data-meta-override-property="og:image"><p><a href="https://coding.blog/img/blogs/performance-comparison-v-gatsbyjs.png">https://coding.blog/img/blogs/performance-comparison-v-gatsbyjs.png</a></p></div><div class="contentnav-0-0-11" data-no-search=""><a href="#how-coding-blog-jamstack-works" class="h1" data-content-highlight="how-coding-blog-jamstack-works">How Coding Blog JAMStack Works</a><a href="#why-jamstack" class="h1" data-content-highlight="why-jamstack">Why JAMStack?</a><a href="#design-goals" class="h1" data-content-highlight="design-goals">Design Goals</a><a href="#basic-rendering" class="h1" data-content-highlight="basic-rendering">Basic Rendering</a><a href="#sdh-rendering" class="h1" data-content-highlight="sdh-rendering">SDH Rendering</a><a href="#static-content" class="h2" data-content-highlight="static-content">Static Content</a><a href="#dynamic-content" class="h2" data-content-highlight="dynamic-content">Dynamic Content</a><a href="#placeholders" class="h3" data-content-highlight="placeholders">Placeholders</a><a href="#bundling" class="h3" data-content-highlight="bundling">Bundling</a><a href="#transport-mechanism" class="h3" data-content-highlight="transport-mechanism">Transport Mechanism</a><a href="#pros" class="h1" data-content-highlight="pros">Pros</a><a href="#caveats" class="h1" data-content-highlight="caveats">Caveats</a><a href="#transport-safety" class="h2" data-content-highlight="transport-safety">Transport Safety</a><a href="#smooth-loading" class="h2" data-content-highlight="smooth-loading">Smooth Loading</a></div></div><div id="-codedoc-toc" class="toc-0-0-8"><div class="content-0-0-9"><p><a href="/">Home</a>
<a href="/creators">For Creators</a></p><div class="collapse-0-0-3 "><script id="zNBXwSUC_W">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("zNBXwSUC_W", "r+Jv/VS/YauITdU0M0jN1Q==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">Updates</span><span class="icon-font closed">chevron_right</span></div><div class="content"><p><a href="/updates/update-1">June 2020</a>
<a href="/updates/update-2">July 2020</a>
<a href="/updates/update-3">September 2020</a></p></div></div><div class="collapse-0-0-3 "><script id="KLsbeORzHz">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("KLsbeORzHz", "r+Jv/VS/YauITdU0M0jN1Q==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">Public Issues</span><span class="icon-font closed">chevron_right</span></div><div class="content"><p><a href="/public-issues/issue-1">Public Issue #1</a></p></div></div><hr><div class="collapse-0-0-3 "><script id="xlcyidssuw">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("xlcyidssuw", "r+Jv/VS/YauITdU0M0jN1Q==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">Account</span><span class="icon-font closed">chevron_right</span></div><div class="content"><p><a href="/account/basics">Basics</a>
<a href="/account/blog">Blog</a></p></div></div><hr><div class="collapse-0-0-3 "><script id="fpUUwcQSPS">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("fpUUwcQSPS", "r+Jv/VS/YauITdU0M0jN1Q==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">Knowledge Base</span><span class="icon-font closed">chevron_right</span></div><div class="content"><p><a href="/knowledge/setting-up-a-blog">Setting up a Blog</a>
<a href="/knowledge/publish-webhook">Publish Webhook</a></p></div></div><div class="collapse-0-0-3 "><script id="bwswwisbBQ">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("bwswwisbBQ", "r+Jv/VS/YauITdU0M0jN1Q==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script><div class="label" onclick="this.parentElement.classList.toggle('open')"><span class="text">Blog</span><span class="icon-font closed">chevron_right</span></div><div class="content"><p><a href="/blog/jamstack">JAMStack</a></p></div></div><p><a href="/about">About</a></p></div></div><div class="footer-0-0-7"><div class="left"><script id="uiYqMXNOTi">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("uiYqMXNOTi", "krgrG9oFN9VQUm9kMirw5Q==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script></div><div class="main"><div class="inside"><a href="https://twitter.com/coding_blog" target="_blank" class="imgLink-0-0-6"><img src="/img/social/twitter-light.svg" class="light"><img src="/img/social/twitter-dark.svg" class="dark"></a><a href="https://github.com/CONNECT-platform/coding-blog" target="_blank" class="imgLink-0-0-6"><img src="/img/social/github-light.svg" class="light"><img src="/img/social/github-dark.svg" class="dark"></a><a href="https://www.linkedin.com/company/coding-blog/" target="_blank" class="imgLink-0-0-6"><img src="/img/social/linkedin-light.svg" class="light"><img src="/img/social/linkedin-dark.svg" class="dark"></a></div></div><div class="right"><script id="tDifXj_tUO">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("tDifXj_tUO", "rt07Ne+r5k791oQZALhn6g==", {});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script></div></div><script id="TXWKByqrHQ">(function(){function load(){if (window.__sdh_transport){window.__sdh_transport("TXWKByqrHQ", "5C7mlfiypfDBeBwm8QT42g==", {"namespace":""});} }; if (document.readyState == 'complete') load(); else window.addEventListener('load', load); })()</script></body></html>